usethis::use_data_raw()
Data<-read_excel("data-raw/Data.xlsx")
devtools::load_all(".")
library(dragDBI)
devtools::load_all(".")
library(readr)
Data<-read_excel("data-raw/Data.xlsx")
library(readxl)
Data<-read_excel("data-raw/Data.xlsx")
## code to prepare `DATASET` dataset goes here
# library(readxl)
Data<-read_excel("data-raw/Data.xlsx")
usethis::use_data(Data, overwrite = TRUE)
devtools::load_all(".")
library(dragDBI)
sinew::makeOxygen(mydataset, add_fields = "source")
sinew::makeOxygen(Data, add_fields = "source")
sinew::makeOxygen(mydataset, add_fields = "source")
sinew::makeOxygen(Data, add_fields = "source")
sinew::makeOxygen(Data, add_fields = "source")
library(sinew)
sinew::makeOxygen(Data, add_fields = "source")
sinew::makeOxygen(Data, add_fields = "source")
sinew::makeOxygen(Data, add_fields = "source")
install.packages("sinew")
install.packages("sinew")
sinew::makeOxygen(Data, add_fields = "source")
library(sinew)
sinew::makeOxygen(Data, add_fields = "source")
usethis::use_r("Data")
#' @title DATASET_TITLE
#' @description DATASET_DESCRIPTION
#' @format A data frame with 73 rows and 5 variables:
#' \describe{
#'   \item{\code{Species}}{character COLUMN_DESCRIPTION}
#'   \item{\code{Distribution}}{character COLUMN_DESCRIPTION}
#'   \item{\code{Threat}}{character COLUMN_DESCRIPTION}
#'   \item{\code{Sensitivity}}{character COLUMN_DESCRIPTION}
#'   \item{\code{SUM}}{character COLUMN_DESCRIPTION}
#'}
#' @source \url{http://somewhere.important.com/}
"DBI_val"
usethis::use_r("Data")
sinew::makeOxygen(Data, add_fields = "source")
## code to prepare `DATASET` dataset goes here
# library(readxl)
Data<-read_excel("data-raw/Data.xlsx")
sinew::makeOxygen(Data, add_fields = "source")
sinew::makeOxygen(Data, add_fields = "source")
sinew::makeOxygen(Data, add_fields = "source")
sinew::makeOxygen(Data, add_fields = "source")
sinew::makeOxygen(DATASET, add_fields = "source")
sinew::makeOxygen(Data, add_fields = "source")
sinew::makeOxygen(Data, add_fields = "source")
sinew::makeOxygen(mydataset, add_fields = "source")
sinew::makeOxygen(Data, add_fields = "source")
sinew::makeOxygen(DATASET, add_fields = "source")
sinew::makeOxygen(DATASET.R, add_fields = "source")
sinew::makeOxygen(data, add_fields = "source")
"Data"
sinew::makeOxygen(Data, add_fields = "source")
sinew::makeOxygen(data, add_fields = "source")
sinew::makeOxygen(data-raw/DATASET, add_fields = "source")
sinew::makeOxygen(data-raw/DATASET.R, add_fields = "source")
sinew::makeOxygen(data-raw/Data.R, add_fields = "source")
sinew::makeOxygen(data-raw/Data, add_fields = "source")
sinew::makeOxygen(data-raw/DATASET, add_fields = "source")
sinew::makeOxygen(DATASET, add_fields = "source")
sinew::makeOxygen(DATASET/Data, add_fields = "source")
sinew::makeOxygen(Data, add_fields = "source")
## code to prepare `DATASET` dataset goes here
# library(readxl)
Data<-read_excel("data-raw/Data.xlsx")
## code to prepare `DATASET` dataset goes here
library(readxl)
Data<-read_excel("data-raw/Data.xlsx")
sinew::makeOxygen(Data, add_fields = "source")
sinew::makeOxygen(Data, add_fields = "source")
Data<-read_excel("data-raw/Data.xlsx")
sinew::makeOxygen(Data, add_fields = "source")
library(dragDBI)
library(dragDBI)
dragDBI::Data
dragDBI::Data$Species
DBI_CE<-read_excel("data-raw/DBI_CE.xlsx")
usethis::use_data(DBI_CE, overwrite = TRUE)
sinew::makeOxygen(DBI_CE, add_fields = "source")
devtools::load_all(".")
library(dragDBI)
dragDBI::DBI_CE
DBI_SA<-read_excel("data-raw/DBI_SA.xlsx")
## code to prepare `DATASET` dataset goes here
library(readxl)
DBI_SA<-read_excel("data-raw/DBI_SA.xlsx")
usethis::use_data(DBI_SA, overwrite = TRUE)
sinew::makeOxygen(DBI_SA, add_fields = "source")
source("C:/Users/verca/Desktop/dragDBI/data-raw/DATASET.R")
library(dragDBI)
## code to prepare `DATASET` dataset goes here
library(readxl)
DBI_MD<-read_excel("data-raw/DBI_MD.xlsx")
usethis::use_data(DBI_MD, overwrite = TRUE)
sinew::makeOxygen(DBI_MD, add_fields = "source")
library(dragDBI)
library(dragDBI)
library(dragDBI)
library(dragDBI)
library(dragDBI)
source("C:/Users/verca/Desktop/dragDBI/R/DBI_MD.R")
library(dragDBI)
library(dragDBI)
library(dragDBI)
CalculateDBI<-function(df, DBI_val, DBI_MD, nos=10000, plot=T){
hist_names<-as.vector(names(df))
if (DBI_val=="CE"){
table_package<-DBI_CE$TOTAL[-which(is.na(DBI_CE$TOTAL))]
}
if(DBI_val=="SA"){
table_package<-DBI_SA$TOTAL[-which(is.na(DBI_SA$TOTAL))]
}
if(DBI_val=="MD"){
table_package<-DBI_MD
DBI<-df$DBI
}
if(DBI_val!="MD"){
DBI<-df$TOTAL
}
c1<-c(1:3)
c2<-c((length(table_package)-2):length(table_package))
table1<-matrix(nrow = 3, ncol = 2)
table_cal<-matrix(nrow = 3)
for (i in 1:(ncol(df)-5)){
i<-i+5
j<-nrow(df)-sum(df[,i]==0) #kolik hodnot je nenulových
k<-which('0' != df[,i]) # pozice, kde nejsou nuly - druhy vyskytujici se ve spolecenstvu
sum.dbi<-sum(as.numeric(DBI[k]))
mean.dbi<-mean(as.numeric(DBI[k])) # y$Suma[k] jakou Sumu (sensitive+ ...) mají druhy ve vzorku
mean.dbi<-round(mean.dbi,3)
if (j %in% c1 | j %in% c2){
vec1<-apply(combn(table_package,length(k)), 2, sum)
}
else {
vec1<-replicate(nos, sum(sample(table_package, length(k), F)))
}
nase.dbi<-round(length(vec1[vec1<=sum.dbi])/(length(vec1)),3)
table_cal<-rbind(sum.dbi, mean.dbi, nase.dbi)
table1<-cbind(table1,table_cal)
if(plot==T){
hist(vec1, main = paste("Naše DBI pro", hist_names[i]), breaks = 20, xlim = c(0,max(vec1)+8),
cex.main = 1, xlab = " ", ylab = " ")
title(xlab="Tady je ten vec1", line = 2.3, cex = 1)
title(ylab="Frequency", line = 2.3, cex = 1)
abline(v=sum.dbi, lwd=3)
}
}
table1<-table1[,3:ncol(table1)]
colnames(table1)<-colnames(df[,6:ncol(df)])
cat("Calculated DBI values","\n")
print(table1)
}
devtools::load_all(".")
library(dragDBI)
install.packages("C:/Users/verca/Desktop/dragDBI_0.0.0.9000.zip", repos = NULL, type = "win.binary")
detach("package:dragDBI", unload = TRUE)
install.packages("C:/Users/verca/Desktop/dragDBI_0.0.0.9000.zip", repos = NULL, type = "win.binary")
library(dragDBI)
library(dragDBI)
library(dragDBI)
library(dragDBI)
library(dragDBI)
LoadData()
## code to prepare `DATASET` dataset goes here
library(readxl)
Data<-read_excel("data-raw/Data.xlsx")
usethis::use_data(Data, overwrite = TRUE)
sinew::makeOxygen(Data, add_fields = "source")
library(dragDBI)
dragDBI::Data
library(dragDBI)
DBI_SA # ok
DBI_CE # ok
Data # pro? m?sto nul NA hodnoty? V composition data se pr?zdnou bu?kou rozum? nula
## code to prepare `DATASET` dataset goes here
library(readxl)
Data<-read_excel("data-raw/Data.xlsx")
usethis::use_data(Data, overwrite = TRUE)
sinew::makeOxygen(Data, add_fields = "source")
rm(Data)
library(dragDBI)
library(dragDBI)
Data # pro? m?sto nul NA hodnoty? V composition data se pr?zdnou bu?kou rozum? nula
devtools::load_all(".")
devtools::load_all(".")
library(dragDBI)
devtools::load_all(".")
library(dragDBI)
devtools::load_all(".")
DBI_CE<-read_excel("data-raw/DBI_CE.xlsx")
## code to prepare `DATASET` dataset goes here
library(readxl)
DBI_CE<-read_excel("data-raw/DBI_CE.xlsx")
usethis::use_data(DBI_CE, overwrite = TRUE)
sinew::makeOxygen(DBI_CE, add_fields = "source")
devtools::load_all(".")
## code to prepare `DATASET` dataset goes here
library(readxl)
DBI_CE<-read_excel("data-raw/DBI_CE.xlsx")
usethis::use_data(DBI_CE, overwrite = TRUE)
sinew::makeOxygen(DBI_CE, add_fields = "source")
library(dragDBI)
str(DBI_CE)
dragDBI::DBI_CE
dragDBI::DBI_CE
dragDBI::DBI_SA
vec1=rep(0:9,10)
sample(vec1,9,prob=1/(vec1+1),replace=F)
Sys.getenv("GITHUB_PAT")
library(dragDBI)
library(dragDBI)
library(dragDBI)
library(dragDBI)
library(dragDBI)
PotDBI
table_package<-as.integer(table_package)
library(dragDBI)
testthat::DebugReporter
usethis::use_test("LoadData")
test_that("multiplication works", {
expect_equal(2 * 2, 4)
})
usethis::test_that("multiplication works", {
expect_equal(2 * 2, 4)
})
usetest::test_that("multiplication works", {
expect_equal(2 * 2, 4)
})
usethis::test_that("multiplication works", {
expect_equal(2 * 2, 4)
})
usethis::use_vignette("vignettes")
library(dragDBI)
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>"
)
?eval
library(dragDBI)
library(devtools)
install_github(VeronikaPrielozna/dragDBI)
library(devtools)
use_vignette("package_dragDBI", title="Package 'dragDBI'")
git config pull.rebase false
git config pull.rebase = false
git config pull.rebase(true)
git config pull.rebase true
git config pull.rebase true
git config pull.rebase false
git config --global pull.ff true
git
git config --global pull.ff true
devtools:::document()
PotDBI<-function(df, DBI_val, DBI_UD, NAval=F, sim=10000, plot=T){
if (DBI_val=="CE"){
table_package<-DBI_CE$TOTAL[-which(DBI_CE$TOTAL=="NA")]
table_package<-as.integer(table_package)
table_user<-df$TOTAL
}
if (DBI_val=="SA"){
table_package<-DBI_SA$TOTAL
table_user<-df$TOTAL
}
if(DBI_val=="UD"){
table_user<-df$DBI
if (NAval==T){
table_package<-DBI_UD$DBI[-which(DBI_UD$DBI=="NA")]
table_package<-as.integer(table_package)
}
if (NAval==F){
table_package<-DBI_UD$DBI
}
COLnum1<-2
COLnum2<-3
}
if(DBI_val!="UD"){
COLnum1<-5
COLnum2<-6
}
table1<-matrix(nrow = 5, ncol = 2)
table_cal<-matrix(nrow = 4)
decr<-sort(table_package,decreasing=T)
incr<-sort(table_package,decreasing=F)
vec.nase.dbi<-vector()
for (i in 1:(ncol(df)-COLnum1)){
i<-i+COLnum1
j<-nrow(df)-sum(df[,i]==0)
k<-which('0' != df[,i])
sum.dbi<-sum(as.numeric(table_user[k]))
vec1<-replicate(sim, sum(sample(table_package, prob = 1/(2^table_package), j, F)))
nase.dbi<-round(length(vec1[vec1<=sum.dbi])/(length(vec1)),3)
vec.nase.dbi<-c(vec.nase.dbi,nase.dbi)
}
for (i in 1:(ncol(df)-COLnum1)){
i<-i+COLnum1
j<-nrow(df)-sum(df[,i]==0)
k<-which('0' != df[,i])
k<-table_user[k]
sum.DBI<-sum(as.numeric(table_user[k]))
potDBI<-(sum(vec.nase.dbi)/sum(decr[1:length(k)]))
trupotDBI<-((sum(vec.nase.dbi)-sum(incr[1:length(k)]))/(sum(decr[1:length(k)])-sum(incr[1:length(k)])))
Pmax<-sum(decr[1:length(k)])
Pmin<-sum(incr[1:length(k)])
table_cal<-rbind(sum.DBI, potDBI, trupotDBI, Pmax, Pmin)
table1<-cbind(table1,table_cal)
}
table1<-table1[,3:ncol(table1)]
colnames(table1)<-colnames(df[,COLnum2:ncol(df)])
if (plot == T){
par(mfrow=c(1,1), mar=c(4,4,2,1))
minP<-table1[5,]
maxP<-table1[4,]
posgr = barplot(as.matrix(table1[1,]), plot = F)
plot(NULL,ylim = c(min(minP),max(maxP)),xlim = c(1,ncol(table1))
, xlab = "", xaxt = "n", ylab = "Sum of DBI")
points(c(1:ncol(table1)), table1[1,], pch = 16)
axis(1,at=1:ncol(table1),lab=colnames(table1),las=2)
for (i in 1:ncol(table1)){
arrows(i,minP[i],i,maxP[i],angle=90,code=3,length=0.08)
}
table1<-round(table1,4)
}
print("DBI potential a true DBI potential")
table2<-matrix(nrow = 1, ncol = ncol(table1))
table2<-rbind(table1[2,], table1[3], table1[1,], table1[4,])
colnames(table2)<-colnames(table1)
rownames(table2)<-c("DBI potential", "True DBI potential", "Sum of DBI", "Maximum of the sum of DBI")
t(table2)
}
PotDBI(Data, DBI_val = "CE")
library(dragDBI)
rm(PotDBI)
PotDBI(Data, DBI_val = "CE")
library(dragDBI)
UniteData(Data, DBI_val = "CE")
Data_x<-UniteData(Data, DBI_val = "CE")
PotDBI(Data_x, DBI_val = "CE")
CalculateDBI(Data_x, DBI_val = "CE")
PermDBI(Data_x, DBI_val = "CE")
library(dragDBI)
PermDBI(Data_x, DBI_val = "CE")
library(dragDBI)
PermDBI(Data_x, DBI_val = "CE")
table2<-t(table2)
library(dragDBI)
PermDBI(Data_x, DBI_val = "CE")
library(dragDBI)
PermDBI(Data_x, DBI_val = "CE")
library(dragDBI)
PermDBI(Data_x, DBI_val = "CE")
library(dragDBI)
PermDBI(Data_x, DBI_val = "CE")
library(dragDBI)
PermDBI(Data_x, DBI_val = "CE")
PotDBI(Data_x, DBI_val = "CE")
CalculateDBI(Data_x, DBI_val = "CE")
PermDBI(Data_x, DBI_val = "CE")
StandardDBI(Data_x)
StandardDBI(Data_x, type = "mean", data = "DBI")
library(dragDBI)
StandardDBI(Data_x, type = "mean", data = "DBI")
library(dragDBI)
StandardDBI(Data_x, type = "mean", data = "DBI")
library(dragDBI)
StandardDBI(Data_x, type = "mean", data = "DBI")
library(dragDBI)
StandardDBI(Data_x, type = "mean", data = "DBI")
PermDBI(Data_x, DBI_val = "CE")
library(dragDBI)
StandardDBI(Data_x, type = "mean", data = "DBI")
library(dragDBI)
StandardDBI(Data_x, type = "mean", data = "DBI")
library(dragDBI)
StandardDBI(Data_x, type = "mean", data = "DBI")
library(dragDBI)
StandardDBI(Data_x, type = "mean", data = "DBI")
library(dragDBI)
StandardDBI(Data_x, type = "mean", data = "DBI")
library(dragDBI)
StandardDBI(Data_x, type = "mean", data = "DBI")
library(dragDBI)
StandardDBI(Data_x, type = "mean", data = "DBI")
library(dragDBI)
StandardDBI(Data_x, type = "mean", data = "DBI")
CalculateDBI(Data_x, DBI_val = "CE")
PermDBI(Data_x, DBI_val = "CE")
PotDBI(Data_x, DBI_val = "CE")
StandardDBI(Data_x, type = "mean", data = "DBI")
PotDBI(Data_x, DBI_val = "CE")
